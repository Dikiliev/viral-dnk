# Структура проекта бекенда

## Созданные файлы

### Модели данных (`api/models.py`)
- **Analysis** - Основная модель для хранения результатов анализа ДНК успеха
- **AnalysisSource** - Источники анализа (URL или файлы)
- **Script** - Сценарии, созданные на основе анализа
- **ScriptSegment** - Сегменты сценария
- **MediaFile** - Медиа файлы для сегментов (изображения, видео, аудио)

### API (`api/`)
- **serializers.py** - Сериализаторы DRF для всех моделей
- **views.py** - ViewSets для работы с анализами и сценариями
- **urls.py** - Маршрутизация API endpoints
- **gemini_service.py** - Сервис для работы с Gemini API (перенесена логика из фронтенда)
- **admin.py** - Настройка админ-панели Django

### Конфигурация
- **requirements.txt** - Зависимости проекта
- **dnk/settings.py** - Настройки Django (DRF, CORS, PostgreSQL, медиа файлы)
- **dnk/urls.py** - Главные URL маршруты

### Документация
- **README.md** - Основная документация
- **SETUP.md** - Инструкция по настройке
- **API_INTEGRATION.md** - Руководство по интеграции с фронтендом

## API Endpoints

### Анализы
- `POST /api/analyses/` - Создать новый анализ
- `GET /api/analyses/` - Список всех анализов
- `GET /api/analyses/{id}/` - Получить анализ по ID
- `GET /api/analyses/history/` - История анализов (последние 20)

### Сценарии
- `POST /api/scripts/` - Создать новый сценарий
- `GET /api/scripts/` - Список всех сценариев
- `GET /api/scripts/{id}/` - Получить сценарий по ID
- `POST /api/scripts/{id}/generate_media/` - Сгенерировать медиа для сегмента

## Особенности реализации

1. **Перенос логики Gemini API на бекенд** - вся логика работы с Gemini API теперь на сервере
2. **Хранение в PostgreSQL** - все данные сохраняются в базе данных
3. **Файловое хранилище** - медиа файлы сохраняются на сервере
4. **CORS настроен** - для работы с фронтендом на localhost:5173
5. **Асинхронная генерация** - медиа генерируется по запросу

## Следующие шаги

1. Установить зависимости: `pip install -r requirements.txt`
2. Настроить PostgreSQL и создать базу данных
3. Создать файл `.env` с переменными окружения
4. Выполнить миграции: `python manage.py makemigrations && python manage.py migrate`
5. Обновить фронтенд для работы с API (см. API_INTEGRATION.md)

